import{r as x,a as oe,R as ae}from"./react-DJ1oPbzn.js";import{E as de,h as me}from"./pdf-B3oYlgPg.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function s(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(t){if(t.ep)return;t.ep=!0;const l=s(t);fetch(t.href,l)}})();var ne={exports:{}},E={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he=x,pe=Symbol.for("react.element"),xe=Symbol.for("react.fragment"),ue=Object.prototype.hasOwnProperty,ge=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,je={key:!0,ref:!0,__self:!0,__source:!0};function ie(p,r,s){var a,t={},l=null,g=null;s!==void 0&&(l=""+s),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(g=r.ref);for(a in r)ue.call(r,a)&&!je.hasOwnProperty(a)&&(t[a]=r[a]);if(p&&p.defaultProps)for(a in r=p.defaultProps,r)t[a]===void 0&&(t[a]=r[a]);return{$$typeof:pe,type:p,key:l,ref:g,props:t,_owner:ge.current}}E.Fragment=xe;E.jsx=ie;E.jsxs=ie;ne.exports=E;var e=ne.exports,L={},se=oe;L.createRoot=se.createRoot,L.hydrateRoot=se.hydrateRoot;const ye=({tabs:p,currentTab:r,onTabChange:s})=>{const a=t=>{switch(t){case"dashboard":return"📊 ";case"collision":return"🚨 ";case"detection":return"🔍 ";case"alerts":return"⚠️ ";case"controller":return"🎮 ";default:return""}};return e.jsx("nav",{className:"nav-tabs",children:e.jsx("div",{className:"container",children:p.map(t=>e.jsxs("button",{className:`nav-tab ${r===t.id?"active":""}`,onClick:()=>s(t.id),children:[e.jsx("span",{className:"tab-icon",children:a(t.id)}),t.label]},t.id))})})},fe=({appData:p,tabs:r,currentTab:s,onTabChange:a})=>e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"container",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"logo-section",children:[e.jsxs("h1",{children:[e.jsx("span",{className:"logo-icon"})," Suraksha"]}),e.jsx("p",{className:"subtitle",children:"AI Railway Safety Module - GatiRakshak System"})]}),e.jsxs("div",{className:"header-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:p.metrics.activeTrains}),e.jsx("span",{className:"stat-label",children:"Active Trains"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value status--success",children:"Online"}),e.jsx("span",{className:"stat-label",children:"System Status"})]})]})]})}),e.jsx(ye,{tabs:r,currentTab:s,onTabChange:a})]}),ve=()=>e.jsx("footer",{className:"footer",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"footer-content",children:[e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{children:"About Suraksha"}),e.jsx("p",{children:"A cutting-edge AI-powered railway safety solution by GatiRakshak, ensuring safe and efficient rail operations across India."})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{children:"Quick Links"}),e.jsxs("ul",{className:"footer-links",children:[e.jsx("li",{children:e.jsx("a",{href:"#dashboard",children:"Dashboard"})}),e.jsx("li",{children:e.jsx("a",{href:"#safety",children:"Safety Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#support",children:"Support"})})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{children:"Contact"}),e.jsxs("ul",{className:"footer-contact",children:[e.jsx("li",{children:"📍 Rail Bhavan, New Delhi"}),e.jsx("li",{children:"📞 Emergency: 1800-111-139"}),e.jsx("li",{children:"✉️ support@gatirakshak.in"})]})]}),e.jsxs("div",{className:"footer-section",children:[e.jsx("h4",{children:"Railway Safety Stats"}),e.jsxs("ul",{className:"footer-stats",children:[e.jsx("li",{children:"🚉 10,000+ Stations Protected"}),e.jsx("li",{children:"🛤️ 50,000+ km Track Coverage"}),e.jsx("li",{children:"🚨 99.9% Alert Accuracy"})]})]})]}),e.jsxs("div",{className:"footer-bottom",children:[e.jsx("p",{children:"© 2025 GatiRakshak - Suraksha. All rights reserved."}),e.jsxs("div",{className:"footer-bottom-links",children:[e.jsx("a",{href:"#privacy",children:"Privacy Policy"}),e.jsx("a",{href:"#terms",children:"Terms of Service"}),e.jsx("a",{href:"#sitemap",children:"Sitemap"})]})]})]})}),te=({appData:p,updateMetrics:r})=>{const s=p.alerts.slice(0,3);return e.jsxs(ae.Fragment,{children:[e.jsx("section",{className:"portal-description",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"description-content",children:[e.jsx("h2",{children:"Proactive Collision Avoidance System"}),e.jsx("p",{children:"Suraksha is a cutting-edge AI-powered safety module of the GatiRakshak system designed for Indian Railways. It provides continuous monitoring and proactive collision prevention through advanced artificial intelligence."}),e.jsxs("div",{className:"feature-grid",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("div",{className:"feature-icon",children:"🛑"}),e.jsx("h3",{children:"Automatic Braking"}),e.jsx("p",{children:"Instantly applies emergency brakes when collision risks are detected"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("div",{className:"feature-icon",children:"👁️"}),e.jsx("h3",{children:"Track Monitoring"}),e.jsx("p",{children:"Detects track defects and obstacles through integrated camera systems"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("div",{className:"feature-icon",children:"⚡"}),e.jsx("h3",{children:"Real-time Alerts"}),e.jsx("p",{children:"Sends immediate notifications to maintenance teams and control centers"})]})]})]})})}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"card metrics-card",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Live Railway Metrics"})}),e.jsx("div",{className:"card__body",children:e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value",children:p.metrics.activeTrains}),e.jsx("div",{className:"metric-label",children:"Active Trains"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value status--warning",children:p.metrics.safetyAlerts}),e.jsx("div",{className:"metric-label",children:"Safety Alerts"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value status--success",children:p.metrics.systemUptime}),e.jsx("div",{className:"metric-label",children:"System Uptime"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value status--info",children:p.metrics.incidentsPrevented}),e.jsx("div",{className:"metric-label",children:"Incidents Prevented"})]})]})})]}),e.jsxs("div",{className:"card map-card",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Track Section Status"})}),e.jsx("div",{className:"card__body",children:e.jsxs("div",{className:"track-map",children:[e.jsxs("div",{className:"track-section status-safe","data-section":"A",children:[e.jsx("span",{className:"section-label",children:"Section A"}),e.jsx("div",{className:"train-icon",children:"🚄"})]}),e.jsxs("div",{className:"track-section status-warning","data-section":"B",children:[e.jsx("span",{className:"section-label",children:"Section B"}),e.jsx("div",{className:"alert-badge",children:"⚠️"})]}),e.jsxs("div",{className:"track-section status-safe","data-section":"C",children:[e.jsx("span",{className:"section-label",children:"Section C"}),e.jsx("div",{className:"train-icon",children:"🚄"})]}),e.jsxs("div",{className:"track-section status-critical","data-section":"D",children:[e.jsx("span",{className:"section-label",children:"Section D"}),e.jsx("div",{className:"alert-badge",children:"🚨"})]})]})})]}),e.jsxs("div",{className:"card alerts-preview",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Recent Safety Alerts"})}),e.jsx("div",{className:"card__body",children:e.jsx("div",{className:"alerts-list",children:s.map(a=>e.jsxs("div",{className:`alert-item ${a.type.toLowerCase()}`,children:[e.jsxs("div",{className:"alert-content",children:[e.jsxs("h4",{children:[a.type," Alert"]}),e.jsx("p",{children:a.message})]}),e.jsx("div",{className:"alert-time",children:a.time})]},a.id))})})]})]})]})},Ne=({appData:p,addAlert:r})=>{const[s,a]=x.useState(!1),[t,l]=x.useState(2.5),[g,u]=x.useState("✅ All trains maintaining safe distance"),[d,b]=x.useState({train1:{left:50,top:50},train2:{right:50,top:150}}),c=()=>{if(s)return;a(!0),u("⚠️ COLLISION RISK DETECTED - Emergency protocols activated");const k={id:Date.now(),type:"Critical",message:"COLLISION IMMINENT - Trains 12951 and 12002 - Emergency brake activated",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"Active",action:"Emergency brake activated automatically"};r(k);let f=0;const T=setInterval(()=>{f++,b(C=>({train1:{...C.train1,left:50+f*15},train2:{...C.train2,right:50+f*15}}));const _=Math.max(.1,2.5-f*.3);l(_),f>=7&&(clearInterval(T),v())},500)},v=()=>{u("✅ EMERGENCY BRAKE ACTIVATED - Trains stopped safely"),a(!1),setTimeout(()=>{w()},3e3)},w=()=>{a(!1),b({train1:{left:50,top:50},train2:{right:50,top:150}}),l(2.5),u("✅ All trains maintaining safe distance")};return x.useEffect(()=>{if(!s){const k=setInterval(()=>{b(f=>({train1:{left:Math.max(20,Math.min(200,f.train1.left+(Math.random()-.5)*20)),top:Math.max(20,Math.min(250,f.train1.top+(Math.random()-.5)*20))},train2:{right:Math.max(20,Math.min(200,f.train2.right+(Math.random()-.5)*20)),top:Math.max(20,Math.min(250,f.train2.top+(Math.random()-.5)*20))}})),l((Math.random()*3+1.5).toFixed(1))},3e3);return()=>clearInterval(k)}},[s]),e.jsxs("div",{className:"collision-grid",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Train Proximity Monitor"})}),e.jsxs("div",{className:"card__body",children:[e.jsxs("div",{className:"proximity-map",children:[e.jsxs("div",{className:"train-tracker",id:"train1",style:{left:`${d.train1.left}px`,top:`${d.train1.top}px`},children:[e.jsx("div",{className:"train-dot",children:"🚄"}),e.jsx("span",{className:"train-label",children:"Rajdhani (12951)"})]}),e.jsxs("div",{className:"train-tracker",id:"train2",style:{right:`${d.train2.right}px`,top:`${d.train2.top}px`},children:[e.jsx("div",{className:"train-dot",children:"🚄"}),e.jsx("span",{className:"train-label",children:"Shatabdi (12002)"})]}),e.jsx("div",{className:`collision-zone ${s?"active":""}`})]}),e.jsxs("div",{className:"collision-controls",children:[e.jsx("button",{className:"btn btn--secondary",onClick:c,disabled:s,children:"Simulate Collision Scenario"}),e.jsx("button",{className:"btn btn--primary",onClick:v,children:"Emergency Brake"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Collision Alert System"})}),e.jsxs("div",{className:"card__body",children:[e.jsx("div",{className:`collision-status ${s?"alert-flash":""}`,children:e.jsx("div",{className:s?"status--error":"status--success",children:g})}),e.jsxs("div",{className:"collision-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Distance Between Trains:"}),e.jsxs("span",{children:[t," km"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Safety Threshold:"}),e.jsx("span",{children:"1.0 km"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{children:"Response Time:"}),e.jsx("span",{children:"2.3s"})]})]})]})]})]})},be=({appData:p,addAlert:r})=>{var U,G,W,K,Y,q,H,J;const[s,a]=x.useState(null),[t,l]=x.useState(!1),[g,u]=x.useState(!1),[d,b]=x.useState(null),[c,v]=x.useState(!1),w=x.useRef(null),k=()=>{v(!0),setTimeout(()=>{if(s){const n=new de("p","mm","a4"),o=document.createElement("div"),m=s.defect&&s.defect.type?`${s.defect.type.toUpperCase()} DETECTED`:"NONE DETECTED";let i="#2e7d32";if(s.defect&&(s.defect.severity==="critical"?i="#d32f2f":s.defect.severity==="high"?i="#f57c00":s.defect.severity==="medium"&&(i="#fbc02d")),o.innerHTML=`
          <div style="padding: 20px; font-family: Arial, sans-serif;">
            <h2 style="color: #2e7d32; text-align: center; font-size: 26px; margin-bottom: 15px;">Indian Railways Track Inspection Report</h2>
            <hr style="border-top: 2px solid #2e7d32; margin-bottom: 20px;">
            
            <div style="background-color: #f5f5f5; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
              <h3 style="font-size: 22px; margin-top: 0; margin-bottom: 15px; color: #333;">Analysis Results</h3>
              
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span style="font-size: 18px; font-weight: bold; color: ${i};">${m}</span>
                <span style="background: #5c6bc0; color: white; padding: 5px 10px; border-radius: 15px; font-size: 16px;">${s.confidence}% confidence</span>
              </div>
              
              <div id="image-placeholder" style="margin: 20px 0; text-align: center;"></div>
              
              <div style="background-color: white; border-radius: 6px; padding: 15px; margin-top: 15px;">
                ${s.defect?`
                <p style="font-size: 16px; margin: 10px 0;"><strong style="color: #333;">Location:</strong> ${s.defect.location}</p>
                <p style="font-size: 16px; margin: 10px 0;"><strong style="color: #333;">Description:</strong> ${s.defect.description}</p>
                <p style="font-size: 16px; margin: 10px 0;">
                  <strong style="color: #333;">Severity:</strong> 
                  <span style="color: ${i}; font-weight: bold;">${s.defect.severity.toUpperCase()}</span>
                </p>
                `:""}
                <p style="font-size: 16px; margin: 10px 0;"><strong style="color: #333;">Recommended Action:</strong> ${s.recommendedAction||(s.defect?P(s.defect):"Continue routine inspection")}</p>
                ${s.safetyImplications?`<p style="font-size: 16px; margin: 10px 0;"><strong style="color: #333;">Safety Implications:</strong> ${s.safetyImplications}</p>`:""}
              </div>
            </div>
            
            <hr style="border-top: 1px solid #ccc; margin: 25px 0;">
            <p style="text-align: center; font-size: 14px; color: #666;">
              Generated by Suraksha Portal - Indian Railways Track Monitoring System<br>
              Date: ${new Date().toLocaleDateString()}<br>
              Time: ${new Date().toLocaleTimeString()}
            </p>
          </div>
        `,document.body.appendChild(o),s.imageData){const h=document.createElement("img");h.src=s.imageData,h.style.maxWidth="100%",h.style.maxHeight="300px",h.style.border="1px solid #ccc",h.style.borderRadius="4px",h.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)",o.querySelector("#image-placeholder").appendChild(h)}me(o).then(h=>{const j=h.toDataURL("image/png"),S=190,y=h.height*S/h.width;n.addImage(j,"PNG",10,10,S,y),n.save(`track-inspection-report-${new Date().toISOString().slice(0,10)}.pdf`),document.body.removeChild(o),v(!1)}).catch(h=>{console.error("Error generating PDF:",h),v(!1),alert("Failed to generate PDF. Please try again.")})}else v(!1),alert("No analysis results available to export.")},500)},f=n=>{l(!0),a(null),setTimeout(()=>{const o="/assets/indianrailways2_1633326562750_1633326571040.jpeg",m=new Image;m.crossOrigin="Anonymous",m.onload=()=>{const i=document.createElement("canvas");i.width=m.width,i.height=m.height,i.getContext("2d").drawImage(m,0,0);const j=i.toDataURL("image/jpeg");B(j).then(async S=>{try{const y=await z(S,`sample_${n}.jpg`);y.imageData=j,a(y)}catch{const A=R(`sample_${n}.jpg`,n);A.imageData=j,a(A)}finally{l(!1)}})},m.onerror=()=>{console.error("Failed to load sample image");const i=R(`sample_${n}.jpg`,n);a(i),l(!1)},m.src=o},800)},T=n=>{const o=n.target.files[0];if(o){if(!o.type.startsWith("image/")){alert("Please select an image file");return}O(o)}},_=n=>{n.preventDefault(),n.currentTarget.classList.add("dragover")},C=n=>{n.currentTarget.classList.remove("dragover")},re=n=>{n.preventDefault(),n.currentTarget.classList.remove("dragover");const o=n.dataTransfer.files;if(o.length>0){const m=o[0];if(!m.type.startsWith("image/")){alert("Please drop an image file");return}O(m)}},O=async n=>{l(!0),a(null);try{const o=await F(n),m=await B(o),i=await z(m,n.name);i.imageData=o,a(i)}catch(o){console.error("Image analysis failed:",o);const m=R(n.name);try{const i=await F(n);m.imageData=i}catch(i){console.error("Failed to convert image to base64:",i)}a(m)}finally{l(!1)}},R=(n,o)=>{const m=["crack","obstacle","looseBolt","joint","ballast","signal","vegetation","drainage"],i=["critical","high","medium","low"],h=["Rail joint at KM 245.7","Track section B-4","Signal post 156","Ballast area near bridge","Rail head at curve"],j=o&&m.includes(o)?o:m[Math.floor(Math.random()*m.length)],S=i[Math.floor(Math.random()*i.length)],y=h[Math.floor(Math.random()*h.length)],A={type:j,severity:S,location:y,description:`AI analysis detected ${j} in ${y}. This requires immediate attention for railway safety.`},M=Math.floor(Math.random()*20)+80;return{defect:A,filename:n,confidence:M,recommendedAction:P(A),safetyImplications:`This ${j} poses ${S} risk to train operations and passenger safety.`,aiAnalysis:`Simulated AI Analysis: Detected ${j} with ${M}% confidence. Location: ${y}. Severity: ${S}. Immediate action required.`,error:"Using enhanced simulated analysis - API temporarily unavailable"}},F=n=>new Promise((o,m)=>{const i=new FileReader;i.readAsDataURL(n),i.onload=()=>o(i.result),i.onerror=h=>m(h)}),B=(n,o=256)=>new Promise(m=>{const i=new Image;i.onload=()=>{const h=Math.min(o/i.width,o/i.height,1),j=document.createElement("canvas");j.width=Math.max(1,Math.floor(i.width*h)),j.height=Math.max(1,Math.floor(i.height*h)),j.getContext("2d").drawImage(i,0,0,j.width,j.height);const y=j.toDataURL("image/jpeg",.6);m(y)},i.onerror=()=>m(n),i.src=n}),z=async(n,o)=>{var V,Z,Q,X,ee;const i=typeof window<"u"&&window.GEMINI_API_KEY||"AIzaSyBOtiWfltFcpNpEnLZZNYHKeKVhpXKN4k4";if(i==="YOUR_GEMINI_API_KEY_HERE")throw new Error("Missing Gemini API key. Set window.GEMINI_API_KEY or replace INLINE_API_KEY.");const h=`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${i}`,j=n.split(",")[1]||n,S={contents:[{parts:[{text:`Analyze the attached railway track image and return ONLY strict JSON with keys: defectType [crack|obstacle|looseBolt|joint|ballast|signal|vegetation|drainage|none], severity [critical|high|medium|low|none], location (short), description (1-2 sentences), recommendedAction (1 sentence), confidence (0-100), safetyImplications (1 sentence). If uncertain, set defectType 'none' with low confidence. Filename: ${o}`},{inline_data:{mime_type:"image/jpeg",data:j}}]}],generationConfig:{temperature:0,maxOutputTokens:600}},y=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!y.ok){const N=await y.text();throw console.error("Gemini API Error:",N),new Error(`Gemini request failed: ${y.status} - ${N}`)}const A=await y.json(),M=((ee=(X=(Q=(Z=(V=A==null?void 0:A.candidates)==null?void 0:V[0])==null?void 0:Z.content)==null?void 0:Q.parts)==null?void 0:X[0])==null?void 0:ee.text)||"",D=ce(M);try{const N=JSON.parse(D),I=(N.defectType||"").toLowerCase()==="none";return{defect:I?null:{type:N.defectType||"unknown",severity:N.severity||"medium",location:N.location||"Unknown location",description:N.description||"No description available"},filename:o,confidence:typeof N.confidence=="number"?N.confidence:I?30:85,recommendedAction:N.recommendedAction||(I?"Continue routine inspection":"Contact maintenance team"),safetyImplications:N.safetyImplications||(I?"Insufficient information to assess risk":"Safety assessment required"),aiAnalysis:D}}catch{return{defect:{type:"analysis",severity:"medium",location:"Track section",description:D.substring(0,200)+"..."},filename:o,confidence:75,recommendedAction:"Review AI analysis and take appropriate action",safetyImplications:"AI analysis completed - manual review recommended",aiAnalysis:D}}},ce=n=>{if(!n)return"";const o=n.match(/```[\s\S]*?```/),m=o?o[0].replace(/```json|```/g,"").trim():n.trim(),i=m.indexOf("{"),h=m.lastIndexOf("}");return i!==-1&&h!==-1&&h>i?m.slice(i,h+1):m},le=n=>{const o={id:Date.now(),type:"Warning",message:`Maintenance required at ${n} - Defect detected by AI system`,time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"Active",action:"Maintenance team notified"};r(o),alert("Maintenance alert generated and sent to dispatch center!")},P=n=>({crack:"Immediate track inspection and repair required",obstacle:"Emergency clearance operation needed",looseBolt:"Schedule maintenance within 24 hours"})[n.type]||"Contact maintenance team",$=()=>{u(!1),b(null)};return e.jsxs("div",{className:"detection-grid",children:[e.jsxs("div",{className:"card upload-card",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Track Image Analysis"})}),e.jsxs("div",{className:"card__body",children:[e.jsx("div",{className:"upload-area",onDragOver:_,onDragLeave:C,onDrop:re,onClick:()=>document.getElementById("fileInput").click(),style:{cursor:"pointer"},children:e.jsxs("div",{className:"upload-content",children:[e.jsx("div",{className:"upload-icon",children:"📷"}),e.jsx("p",{children:"Drop track images here or click to browse"}),e.jsx("input",{type:"file",accept:"image/*",onChange:T,style:{display:"none"},id:"fileInput"}),e.jsx("span",{children:"Click to upload"})]})}),e.jsxs("div",{className:"sample-images",children:[e.jsx("h4",{children:"Sample Images:"}),e.jsxs("div",{className:"sample-grid",children:[e.jsx("button",{className:"sample-btn",onClick:()=>f("crack"),disabled:t,children:"Track Crack"}),e.jsx("button",{className:"sample-btn",onClick:()=>f("obstacle"),disabled:t,children:"Obstacle"}),e.jsx("button",{className:"sample-btn",onClick:()=>f("bolts"),disabled:t,children:"Loose Bolts"})]})]})]})]}),e.jsxs("div",{className:"card analysis-card",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"AI Analysis Results"})}),e.jsx("div",{className:"card__body",children:e.jsx("div",{className:"analysis-results",children:t?e.jsx("div",{className:"loading",children:"Analyzing image with AI..."}):s?e.jsxs("div",{className:"analysis-item animate-in",children:[e.jsxs("div",{className:"analysis-header",children:[s.defect?e.jsxs("span",{className:"defect-type",style:{color:"var(--color-indigo-700)"},children:[s.defect.type.toUpperCase()," DETECTED"]}):e.jsx("span",{className:"defect-type",style:{color:"var(--color-green-700)"},children:"NO DEFECTS DETECTED"}),e.jsxs("span",{className:"confidence-score",style:{background:"var(--color-indigo-600)"},children:[s.confidence,"% confidence"]})]}),s.imageData&&e.jsx("div",{className:"analysis-image",style:{marginBottom:"15px",textAlign:"center"},children:e.jsx("img",{src:s.imageData,alt:"Analyzed Track Image",style:{maxWidth:"100%",maxHeight:"250px",border:"1px solid #ccc",borderRadius:"4px"}})}),s.defect?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",s.defect.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.defect.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Severity:"})," ",e.jsx("span",{className:`status--${s.defect.severity==="critical"?"error":s.defect.severity==="high"?"warning":"info"}`,children:s.defect.severity.toUpperCase()})]})]}):e.jsx(e.Fragment,{children:e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," No specific defect indicated by filename/context."]})}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recommended Action:"})," ",s.recommendedAction||(s.defect?P(s.defect):"Continue routine inspection")]}),s.safetyImplications&&e.jsxs("p",{children:[e.jsx("strong",{children:"Safety Implications:"})," ",s.safetyImplications]}),s.error&&e.jsxs("p",{className:"error-message",children:["⚠️ ",s.error]}),e.jsx("div",{className:"analysis-actions",children:s.defect&&e.jsx("button",{className:"btn btn--secondary",onClick:()=>le(s.defect.location),children:"Send to Maintenance"})}),e.jsx("div",{className:"export-report-container",children:e.jsx("button",{className:"btn btn--primary export-btn",onClick:()=>k(),children:"Export Report"})})]}):e.jsx("div",{className:"no-analysis",children:e.jsx("p",{children:"Upload an image or select a sample to see AI detection results"})})})})]}),c&&e.jsx("div",{className:"pdf-loading",children:e.jsx("div",{className:"loading-spinner"})}),g&&d&&e.jsx("div",{className:"modal-overlay",onClick:$,children:e.jsxs("div",{className:"modal",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"modal__header",children:[e.jsx("h3",{children:"Detailed Analysis Report"}),e.jsx("button",{className:"modal__close",onClick:$,children:"×"})]}),e.jsx("div",{className:"modal__body",children:e.jsxs("div",{className:"modal-analysis",ref:w,children:[e.jsx("h4",{children:"Analysis Summary"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Image:"})," ",d.filename]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Defect Type:"})," ",(G=(U=d.analysisResults)==null?void 0:U.defect)==null?void 0:G.type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Severity:"})," ",(K=(W=d.analysisResults)==null?void 0:W.defect)==null?void 0:K.severity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",(q=(Y=d.analysisResults)==null?void 0:Y.defect)==null?void 0:q.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Confidence:"})," ",(H=d.analysisResults)==null?void 0:H.confidence,"%"]}),e.jsx("h5",{children:"AI Analysis"}),d.aiAnalysis?e.jsx("div",{className:"ai-analysis-content",children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontFamily:"var(--font-family-base)",background:"var(--color-gray-50)",padding:"var(--space-16)",borderRadius:"var(--radius-base)",fontSize:"var(--font-size-sm)",lineHeight:"var(--line-height-relaxed)"},children:d.aiAnalysis})}):e.jsx("p",{children:"No structured AI analysis text was returned."}),e.jsx("h5",{children:"Maintenance Recommendations:"}),e.jsx("p",{children:((J=d.analysisResults)==null?void 0:J.recommendedAction)||"Review site and schedule appropriate maintenance."}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn--primary",children:"Generate Work Order"}),e.jsx("button",{className:"btn btn--secondary",onClick:k,children:"Export as PDF"}),e.jsx("button",{className:"btn btn--secondary",onClick:$,children:"Close"})]})]})})]})})]})},Se=({appData:p,addAlert:r})=>{const[s,a]=x.useState("all"),[t,l]=x.useState(!1),g=s==="all"?p.alerts:p.alerts.filter(c=>c.type.toLowerCase()===s),u=()=>{l(!0),setTimeout(()=>{alert("All active alerts have been acknowledged!"),l(!1)},1500)},d=()=>{l(!0);const c={id:Date.now(),type:"Info",message:"Maintenance team dispatched - All active alerts require attention",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"Active",action:"Maintenance team notified and dispatched"};r(c),setTimeout(()=>{alert("Maintenance team has been notified and dispatched!"),l(!1)},1e3)},b=()=>{if(window.confirm("Are you sure you want to initiate an emergency stop? This will halt all train operations.")){l(!0);const c={id:Date.now(),type:"Critical",message:"EMERGENCY STOP INITIATED - All train operations halted immediately",time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"Active",action:"Emergency protocols activated - All trains stopped"};r(c),setTimeout(()=>{alert("EMERGENCY STOP ACTIVATED! All train operations have been halted."),l(!1)},1e3)}};return e.jsxs("div",{className:"alerts-grid",children:[e.jsxs("div",{className:"card alerts-feed",children:[e.jsxs("div",{className:"card__header",children:[e.jsx("h3",{children:"Live Alert Feed"}),e.jsxs("div",{className:"alert-filters",children:[e.jsx("button",{className:`filter-btn ${s==="all"?"active":""}`,onClick:()=>a("all"),children:"All"}),e.jsx("button",{className:`filter-btn ${s==="critical"?"active":""}`,onClick:()=>a("critical"),children:"Critical"}),e.jsx("button",{className:`filter-btn ${s==="warning"?"active":""}`,onClick:()=>a("warning"),children:"Warning"})]})]}),e.jsx("div",{className:"card__body",children:e.jsx("div",{className:"alerts-feed-list",children:g.map(c=>e.jsxs("div",{className:`alert-item ${c.type.toLowerCase()} animate-in`,children:[e.jsxs("div",{className:"alert-content",children:[e.jsxs("h4",{children:[c.type," Alert - ID: ",c.id]}),e.jsx("p",{children:c.message}),e.jsxs("p",{children:[e.jsx("strong",{children:"Action:"})," ",c.action]}),e.jsx("div",{className:`status status--${c.status.toLowerCase()}`,children:c.status})]}),e.jsx("div",{className:"alert-time",children:c.time})]},c.id))})})]}),e.jsxs("div",{className:"card alert-actions",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Response Actions"})}),e.jsxs("div",{className:"card__body",children:[e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn--lg btn--primary",onClick:u,disabled:t,children:t?"Processing...":"Acknowledge All"}),e.jsx("button",{className:"btn btn--lg btn--secondary",onClick:d,disabled:t,children:t?"Sending...":"Send Maintenance"}),e.jsx("button",{className:"btn btn--lg status--warning",onClick:b,disabled:t,children:t?"Processing...":"Emergency Stop"})]}),e.jsxs("div",{className:"response-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"2.3s"}),e.jsx("span",{className:"stat-label",children:"Avg Response Time"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:"98.5%"}),e.jsx("span",{className:"stat-label",children:"Alert Resolution Rate"})]})]})]})]})]})},Ae=({appData:p})=>{const[r,s]=x.useState({aiDetection:"Online",collisionAvoidance:"Active",trackMonitoring:"Warning",alertSystem:"Operational"}),[a,t]=x.useState({systemStart:"Start System",systemPause:"Pause Monitoring",emergencyStop:"Emergency Stop"}),l=u=>{t(d=>({...d,[u]:"Processing..."})),setTimeout(()=>{switch(u){case"systemStart":t(d=>({...d,[u]:"✅ System Running"}));break;case"systemPause":t(d=>({...d,[u]:"⏸️ System Paused"}));break;case"emergencyStop":t(d=>({...d,[u]:"🛑 Emergency Active"}));break}setTimeout(()=>{t(d=>({...d,[u]:u==="systemStart"?"Start System":u==="systemPause"?"Pause Monitoring":"Emergency Stop"}))},3e3)},1e3)};x.useEffect(()=>{const u=setInterval(()=>{if(Math.random()>.95){const d=["Online","Active","Operational","Warning"],b=d[Math.floor(Math.random()*d.length)];s(c=>({...c,trackMonitoring:b}))}},5e3);return()=>clearInterval(u)},[]);const g=u=>{switch(u){case"Online":case"Active":case"Operational":return"status--success";case"Warning":return"status--warning";default:return"status--info"}};return e.jsxs("div",{className:"controller-grid",children:[e.jsxs("div",{className:"card control-panel",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"Master Control Panel"})}),e.jsx("div",{className:"card__body",children:e.jsxs("div",{className:"control-sections",children:[e.jsxs("div",{className:"control-section",children:[e.jsx("h4",{children:"System Controls"}),e.jsxs("div",{className:"control-buttons",children:[e.jsx("button",{className:"btn btn--primary control-btn",onClick:()=>l("systemStart"),disabled:a.systemStart==="Processing...",children:a.systemStart}),e.jsx("button",{className:"btn btn--secondary control-btn",onClick:()=>l("systemPause"),disabled:a.systemPause==="Processing...",children:a.systemPause}),e.jsx("button",{className:"btn status--warning control-btn",onClick:()=>l("emergencyStop"),disabled:a.emergencyStop==="Processing...",children:a.emergencyStop})]})]}),e.jsxs("div",{className:"control-section",children:[e.jsx("h4",{children:"Manual Overrides"}),e.jsxs("div",{className:"override-controls",children:[e.jsx("label",{className:"form-label",children:"Track Section:"}),e.jsxs("select",{className:"form-control",children:[e.jsx("option",{value:"A",children:"Section A"}),e.jsx("option",{value:"B",children:"Section B"}),e.jsx("option",{value:"C",children:"Section C"}),e.jsx("option",{value:"D",children:"Section D"})]}),e.jsx("button",{className:"btn btn--outline",children:"Override Safety"})]})]})]})})]}),e.jsxs("div",{className:"card system-status",children:[e.jsx("div",{className:"card__header",children:e.jsx("h3",{children:"System Status Monitor"})}),e.jsx("div",{className:"card__body",children:e.jsxs("div",{className:"status-indicators",children:[e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:`status-dot ${g(r.aiDetection)}`}),e.jsx("span",{children:"AI Detection Engine"}),e.jsx("span",{className:"status-value",children:r.aiDetection})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:`status-dot ${g(r.collisionAvoidance)}`}),e.jsx("span",{children:"Collision Avoidance"}),e.jsx("span",{className:"status-value",children:r.collisionAvoidance})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:`status-dot ${g(r.trackMonitoring)}`}),e.jsx("span",{children:"Track Monitoring"}),e.jsx("span",{className:"status-value",children:r.trackMonitoring})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:`status-dot ${g(r.alertSystem)}`}),e.jsx("span",{children:"Alert System"}),e.jsx("span",{className:"status-value",children:r.alertSystem})]})]})})]})]})},ke={trains:[{id:"12951",name:"Rajdhani Express",status:"Running",speed:110,position:{lat:28.6139,lng:77.209},direction:"North"},{id:"12002",name:"Shatabdi Express",status:"Running",speed:95,position:{lat:28.6,lng:77.22},direction:"South"},{id:"16317",name:"Himsagar Express",status:"Running",speed:85,position:{lat:28.595,lng:77.215},direction:"East"}],alerts:[],trackDefects:[],metrics:{activeTrains:47,safetyAlerts:12,systemUptime:"99.7%",incidentsPrevented:156,averageResponseTime:"2.3 seconds"},sampleImages:[]},we=()=>{const[p,r]=x.useState(ke),[s,a]=x.useState(124567),[t,l]=x.useState(156),g=x.useCallback(()=>{r(c=>({...c,metrics:{...c.metrics,activeTrains:Math.max(45,Math.min(50,c.metrics.activeTrains+(Math.random()>.7?Math.random()>.5?1:-1:0))),safetyAlerts:Math.max(8,Math.min(15,c.metrics.safetyAlerts+(Math.random()>.8?Math.random()>.5?1:-1:0)))}})),Math.random()>.9&&(l(c=>c+1),r(c=>({...c,metrics:{...c.metrics,incidentsPrevented:c.metrics.incidentsPrevented+1}})))},[]),u=x.useCallback(c=>{r(v=>({...v,alerts:[c,...v.alerts.slice(0,9)]}))},[]),d=x.useCallback(()=>{if(Math.random()>.95){const c=["Warning","Info"],v=["Minor track irregularity detected at KM 234.2","Maintenance crew deployed to section C-4","Weather monitoring alert - heavy rain predicted","Signal system test completed successfully","Track inspection completed - no issues found"],w={id:Date.now(),type:c[Math.floor(Math.random()*c.length)],message:v[Math.floor(Math.random()*v.length)],time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),status:"Active",action:"Monitoring"};u(w)}},[u]),b=x.useCallback(()=>{a(c=>c+Math.floor(Math.random()*5)+1)},[]);return x.useEffect(()=>{const c=setInterval(()=>{g(),d(),b()},3e3);return()=>clearInterval(c)},[g,d,b]),{appData:{...p,monitorCount:s,preventedIncidents:t},updateMetrics:g,addAlert:u}};function Ie(){const[p,r]=x.useState("dashboard"),{appData:s,updateMetrics:a,addAlert:t}=we(),l=[{id:"dashboard",label:"Dashboard"},{id:"collision",label:"Collision Avoidance"},{id:"detection",label:"Track Detection"},{id:"alerts",label:"Alert Management"},{id:"controller",label:"Controller"}],g=()=>{switch(p){case"dashboard":return e.jsx(te,{appData:s,updateMetrics:a});case"collision":return e.jsx(Ne,{appData:s,addAlert:t});case"detection":return e.jsx(be,{appData:s,addAlert:t});case"alerts":return e.jsx(Se,{appData:s,addAlert:t});case"controller":return e.jsx(Ae,{appData:s});default:return e.jsx(te,{appData:s,updateMetrics:a})}};return e.jsxs("div",{className:"app",children:[e.jsx(fe,{appData:s,tabs:l,currentTab:p,onTabChange:r}),e.jsx("main",{className:"main-content",children:e.jsx("div",{className:"container",children:g()})}),e.jsx(ve,{})]})}L.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(Ie,{})}));
//# sourceMappingURL=index-DchS6CFt.js.map
